<?php

require_once 'agora_script_base.class.php';

class script_activate_tiny_mce_colors extends agora_script_base {

    public $title = 'Configura el connector tiny_fontcolor del TinyMCE';
    public $info = 'Revisa la configuració del connector tiny_fontcolor del TinyMCE i l\'activa si no ho està.';
    public $cli = true;
    protected $category = 'Utils';

    protected function _execute($params = [], $execute = true): bool {

        $states = filter_get_global_states();
        $multilang_is_active = (int)$states['multilang']->active === 1;

        // Activate multilanguage filter if it is not active.
        if (!$multilang_is_active) {
            $class = core_plugin_manager::resolve_plugininfo_class('filter');
            $class::enable_plugin('multilang', 1);
            filter_set_applies_to_strings('multilang', true);
            mtrace('Filter multilang activated and configured', "\n");
        }

        $backgroundColors = '[{"name":"<span class=\"multilang\" lang=\"ca\">Verd clar<\/span> <span class=\"multilang\" lang=\"es\">Verde claro<\/span> <span class=\"multilang\" lang=\"fr\">Vert clair<\/span> <span class=\"multilang\" lang=\"de\">Hellgr\u00fcn<\/span> <span class=\"multilang\" lang=\"en\">Light green<\/span>","value":"#bfedd2"},{"name":"<span class=\"multilang\" lang=\"ca\">Groc clar<\/span> <span class=\"multilang\" lang=\"es\">Amarillo claro<\/span> <span class=\"multilang\" lang=\"fr\">Jaune clair<\/span> <span class=\"multilang\" lang=\"de\">Hellgelb<\/span> <span class=\"multilang\" lang=\"en\">Light yellow<\/span>","value":"#fbeeb8"},{"name":"<span class=\"multilang\" lang=\"ca\">Vermell clar<\/span> <span class=\"multilang\" lang=\"es\">Rojo claro<\/span> <span class=\"multilang\" lang=\"fr\">Rouge clair<\/span> <span class=\"multilang\" lang=\"de\">Hellrot<\/span> <span class=\"multilang\" lang=\"en\">Light red<\/span>","value":"#f8cac6"},{"name":"<span class=\"multilang\" lang=\"ca\">Porpra clar<\/span> <span class=\"multilang\" lang=\"es\">P\u00farpura claro<\/span> <span class=\"multilang\" lang=\"fr\">Violet clair<\/span> <span class=\"multilang\" lang=\"de\">Helllila<\/span> <span class=\"multilang\" lang=\"en\">Light purple<\/span>","value":"#eccafa"},{"name":"<span class=\"multilang\" lang=\"ca\">Blau clar<\/span> <span class=\"multilang\" lang=\"es\">Azul claro<\/span> <span class=\"multilang\" lang=\"fr\">Bleu clair<\/span> <span class=\"multilang\" lang=\"de\">Hellblau<\/span> <span class=\"multilang\" lang=\"en\">Light blue<\/span>","value":"#c2e0f4"},{"name":"<span class=\"multilang\" lang=\"ca\">Verd<\/span> <span class=\"multilang\" lang=\"es\">Verde<\/span> <span class=\"multilang\" lang=\"fr\">Vert<\/span> <span class=\"multilang\" lang=\"de\">Gr\u00fcn<\/span> <span class=\"multilang\" lang=\"en\">Green<\/span>","value":"#2dc26b"},{"name":"<span class=\"multilang\" lang=\"ca\">Groc<\/span> <span class=\"multilang\" lang=\"es\">Amarillo<\/span> <span class=\"multilang\" lang=\"fr\">Jaune<\/span> <span class=\"multilang\" lang=\"de\">Gelb<\/span> <span class=\"multilang\" lang=\"en\">Yellow<\/span>","value":"#f1c40f"},{"name":"<span class=\"multilang\" lang=\"ca\">Vermell<\/span> <span class=\"multilang\" lang=\"es\">Rojo<\/span> <span class=\"multilang\" lang=\"fr\">Rouge<\/span> <span class=\"multilang\" lang=\"de\">Rot<\/span> <span class=\"multilang\" lang=\"en\">Red<\/span>","value":"#e03e2d"},{"name":"<span class=\"multilang\" lang=\"ca\">Porpra<\/span> <span class=\"multilang\" lang=\"es\">P\u00farpura<\/span> <span class=\"multilang\" lang=\"fr\">Violet<\/span> <span class=\"multilang\" lang=\"de\">Lila<\/span> <span class=\"multilang\" lang=\"en\">Purple<\/span>","value":"#b96ad9"},{"name":"<span class=\"multilang\" lang=\"ca\">Blau<\/span> <span class=\"multilang\" lang=\"es\">Azul<\/span> <span class=\"multilang\" lang=\"fr\">Bleu<\/span> <span class=\"multilang\" lang=\"de\">Blau<\/span> <span class=\"multilang\" lang=\"en\">Blue<\/span>","value":"#3598db"},{"name":"<span class=\"multilang\" lang=\"ca\">Turquesa fosc<\/span> <span class=\"multilang\" lang=\"es\">Turquesa oscuro<\/span> <span class=\"multilang\" lang=\"fr\">Turquoise fonc\u00e9<\/span> <span class=\"multilang\" lang=\"de\">Dunkelt\u00fcrkis<\/span> <span class=\"multilang\" lang=\"en\">Dark turquoise<\/span>","value":"#169179"},{"name":"<span class=\"multilang\" lang=\"ca\">Taronja fosc<\/span> <span class=\"multilang\" lang=\"es\">Naranja oscuro<\/span> <span class=\"multilang\" lang=\"fr\">Orange fonc\u00e9<\/span> <span class=\"multilang\" lang=\"de\">Dunkelorange<\/span> <span class=\"multilang\" lang=\"en\">Dark orange<\/span>","value":"#e67e23"},{"name":"<span class=\"multilang\" lang=\"ca\">Vermell fosc<\/span> <span class=\"multilang\" lang=\"es\">Rojo oscuro<\/span> <span class=\"multilang\" lang=\"fr\">Rouge fonc\u00e9<\/span> <span class=\"multilang\" lang=\"de\">Dunkelrot<\/span> <span class=\"multilang\" lang=\"en\">Dark red<\/span>","value":"#ba372a"},{"name":"<span class=\"multilang\" lang=\"ca\">Porpra fosc<\/span> <span class=\"multilang\" lang=\"es\">P\u00farpura oscuro<\/span> <span class=\"multilang\" lang=\"fr\">Violet fonc\u00e9<\/span> <span class=\"multilang\" lang=\"de\">Dunkellila<\/span> <span class=\"multilang\" lang=\"en\">Dark purple<\/span>","value":"#843fa1"},{"name":"<span class=\"multilang\" lang=\"ca\">Blau fosc<\/span> <span class=\"multilang\" lang=\"es\">Azul oscuro<\/span> <span class=\"multilang\" lang=\"fr\">Bleu fonc\u00e9<\/span> <span class=\"multilang\" lang=\"de\">Dunkelblau<\/span> <span class=\"multilang\" lang=\"en\">Dark blue<\/span>","value":"#236fa1"},{"name":"<span class=\"multilang\" lang=\"ca\">Gris clar<\/span> <span class=\"multilang\" lang=\"es\">Gris claro<\/span> <span class=\"multilang\" lang=\"fr\">Gris clair<\/span> <span class=\"multilang\" lang=\"de\">Hellgrau<\/span> <span class=\"multilang\" lang=\"en\">Light grey<\/span>","value":"#ecf0f1"},{"name":"<span class=\"multilang\" lang=\"ca\">Gris mitj\u00e0<\/span> <span class=\"multilang\" lang=\"es\">Gris medio<\/span> <span class=\"multilang\" lang=\"fr\">Gris moyen<\/span> <span class=\"multilang\" lang=\"de\">Mittelgrau<\/span> <span class=\"multilang\" lang=\"en\">Medium grey<\/span>","value":"#ced4d9"},{"name":"<span class=\"multilang\" lang=\"ca\">Gris<\/span> <span class=\"multilang\" lang=\"es\">Gris<\/span> <span class=\"multilang\" lang=\"fr\">Gris<\/span> <span class=\"multilang\" lang=\"de\">Grau<\/span> <span class=\"multilang\" lang=\"en\">Grey<\/span>","value":"#95a5a6"},{"name":"<span class=\"multilang\" lang=\"ca\">Gris fosc<\/span> <span class=\"multilang\" lang=\"es\">Gris oscuro<\/span> <span class=\"multilang\" lang=\"fr\">Gris fonc\u00e9<\/span> <span class=\"multilang\" lang=\"de\">Dunkelgrau<\/span> <span class=\"multilang\" lang=\"en\">Dark grey<\/span>","value":"#7e8c8d"},{"name":"<span class=\"multilang\" lang=\"ca\">Blau mar\u00ed<\/span> <span class=\"multilang\" lang=\"es\">Azul marino<\/span> <span class=\"multilang\" lang=\"fr\">Bleu marine<\/span> <span class=\"multilang\" lang=\"de\">Marineblau<\/span> <span class=\"multilang\" lang=\"en\">Navy blue<\/span>","value":"#34495e"},{"name":"<span class=\"multilang\" lang=\"ca\">Negre<\/span><span class=\"multilang\" lang=\"es\">Negro<\/span><span class=\"multilang\" lang=\"fr\">N\u00e8gre<\/span><span class=\"multilang\" lang=\"de\">Schwarz<\/span><span class=\"multilang\" lang=\"en\">Black<\/span>","value":"#000000"},{"name":"<span class=\"multilang\" lang=\"ca\">Blanc<\/span> <span class=\"multilang\" lang=\"es\">Blanco<\/span> <span class=\"multilang\" lang=\"fr\">Blanc<\/span> <span class=\"multilang\" lang=\"de\">Wei\u00df<\/span> <span class=\"multilang\" lang=\"en\">White<\/span>","value":"#FFFFFF"}]';
        set_config('backgroundcolors', $backgroundColors, 'tiny_fontcolor');
        mtrace('Background colors for tiny_fontcolor configured', "\n");

        $textColors = '[{"name":"<span class=\"multilang\" lang=\"ca\">Verd clar<\/span> <span class=\"multilang\" lang=\"es\">Verde claro<\/span> <span class=\"multilang\" lang=\"fr\">Vert clair<\/span> <span class=\"multilang\" lang=\"de\">Hellgr\u00fcn<\/span> <span class=\"multilang\" lang=\"en\">Light green<\/span>","value":"#bfedd2"},{"name":"<span class=\"multilang\" lang=\"ca\">Groc clar<\/span> <span class=\"multilang\" lang=\"es\">Amarillo claro<\/span> <span class=\"multilang\" lang=\"fr\">Jaune clair<\/span> <span class=\"multilang\" lang=\"de\">Hellgelb<\/span> <span class=\"multilang\" lang=\"en\">Light yellow<\/span>","value":"#fbeeb8"},{"name":"<span class=\"multilang\" lang=\"ca\">Vermell clar<\/span> <span class=\"multilang\" lang=\"es\">Rojo claro<\/span> <span class=\"multilang\" lang=\"fr\">Rouge clair<\/span> <span class=\"multilang\" lang=\"de\">Hellrot<\/span> <span class=\"multilang\" lang=\"en\">Light red<\/span>","value":"#f8cac6"},{"name":"<span class=\"multilang\" lang=\"ca\">Porpra clar<\/span> <span class=\"multilang\" lang=\"es\">P\u00farpura claro<\/span> <span class=\"multilang\" lang=\"fr\">Violet clair<\/span> <span class=\"multilang\" lang=\"de\">Helllila<\/span> <span class=\"multilang\" lang=\"en\">Light purple<\/span>","value":"#eccafa"},{"name":"<span class=\"multilang\" lang=\"ca\">Blau clar<\/span> <span class=\"multilang\" lang=\"es\">Azul claro<\/span> <span class=\"multilang\" lang=\"fr\">Bleu clair<\/span> <span class=\"multilang\" lang=\"de\">Hellblau<\/span> <span class=\"multilang\" lang=\"en\">Light blue<\/span>","value":"#c2e0f4"},{"name":"<span class=\"multilang\" lang=\"ca\">Verd<\/span> <span class=\"multilang\" lang=\"es\">Verde<\/span> <span class=\"multilang\" lang=\"fr\">Vert<\/span> <span class=\"multilang\" lang=\"de\">Gr\u00fcn<\/span> <span class=\"multilang\" lang=\"en\">Green<\/span>","value":"#2dc26b"},{"name":"<span class=\"multilang\" lang=\"ca\">Groc<\/span> <span class=\"multilang\" lang=\"es\">Amarillo<\/span> <span class=\"multilang\" lang=\"fr\">Jaune<\/span> <span class=\"multilang\" lang=\"de\">Gelb<\/span> <span class=\"multilang\" lang=\"en\">Yellow<\/span>","value":"#f1c40f"},{"name":"<span class=\"multilang\" lang=\"ca\">Vermell<\/span> <span class=\"multilang\" lang=\"es\">Rojo<\/span> <span class=\"multilang\" lang=\"fr\">Rouge<\/span> <span class=\"multilang\" lang=\"de\">Rot<\/span> <span class=\"multilang\" lang=\"en\">Red<\/span>","value":"#e03e2d"},{"name":"<span class=\"multilang\" lang=\"ca\">Porpra<\/span> <span class=\"multilang\" lang=\"es\">P\u00farpura<\/span> <span class=\"multilang\" lang=\"fr\">Violet<\/span> <span class=\"multilang\" lang=\"de\">Lila<\/span> <span class=\"multilang\" lang=\"en\">Purple<\/span>","value":"#b96ad9"},{"name":"<span class=\"multilang\" lang=\"ca\">Blau<\/span> <span class=\"multilang\" lang=\"es\">Azul<\/span> <span class=\"multilang\" lang=\"fr\">Bleu<\/span> <span class=\"multilang\" lang=\"de\">Blau<\/span> <span class=\"multilang\" lang=\"en\">Blue<\/span>","value":"#3598db"},{"name":"<span class=\"multilang\" lang=\"ca\">Turquesa fosc<\/span> <span class=\"multilang\" lang=\"es\">Turquesa oscuro<\/span> <span class=\"multilang\" lang=\"fr\">Turquoise fonc\u00e9<\/span> <span class=\"multilang\" lang=\"de\">Dunkelt\u00fcrkis<\/span> <span class=\"multilang\" lang=\"en\">Dark turquoise<\/span>","value":"#169179"},{"name":"<span class=\"multilang\" lang=\"ca\">Taronja fosc<\/span> <span class=\"multilang\" lang=\"es\">Naranja oscuro<\/span> <span class=\"multilang\" lang=\"fr\">Orange fonc\u00e9<\/span> <span class=\"multilang\" lang=\"de\">Dunkelorange<\/span> <span class=\"multilang\" lang=\"en\">Dark orange<\/span>","value":"#e67e23"},{"name":"<span class=\"multilang\" lang=\"ca\">Vermell fosc<\/span> <span class=\"multilang\" lang=\"es\">Rojo oscuro<\/span> <span class=\"multilang\" lang=\"fr\">Rouge fonc\u00e9<\/span> <span class=\"multilang\" lang=\"de\">Dunkelrot<\/span> <span class=\"multilang\" lang=\"en\">Dark red<\/span>","value":"#ba372a"},{"name":"<span class=\"multilang\" lang=\"ca\">Porpra fosc<\/span> <span class=\"multilang\" lang=\"es\">P\u00farpura oscuro<\/span> <span class=\"multilang\" lang=\"fr\">Violet fonc\u00e9<\/span> <span class=\"multilang\" lang=\"de\">Dunkellila<\/span> <span class=\"multilang\" lang=\"en\">Dark purple<\/span>","value":"#843fa1"},{"name":"<span class=\"multilang\" lang=\"ca\">Blau fosc<\/span> <span class=\"multilang\" lang=\"es\">Azul oscuro<\/span> <span class=\"multilang\" lang=\"fr\">Bleu fonc\u00e9<\/span> <span class=\"multilang\" lang=\"de\">Dunkelblau<\/span> <span class=\"multilang\" lang=\"en\">Dark blue<\/span>","value":"#236fa1"},{"name":"<span class=\"multilang\" lang=\"ca\">Gris clar<\/span> <span class=\"multilang\" lang=\"es\">Gris claro<\/span> <span class=\"multilang\" lang=\"fr\">Gris clair<\/span> <span class=\"multilang\" lang=\"de\">Hellgrau<\/span> <span class=\"multilang\" lang=\"en\">Light grey<\/span>","value":"#ecf0f1"},{"name":"<span class=\"multilang\" lang=\"ca\">Gris mitj\u00e0<\/span> <span class=\"multilang\" lang=\"es\">Gris medio<\/span> <span class=\"multilang\" lang=\"fr\">Gris moyen<\/span> <span class=\"multilang\" lang=\"de\">Mittelgrau<\/span> <span class=\"multilang\" lang=\"en\">Medium grey<\/span>","value":"#ced4d9"},{"name":"<span class=\"multilang\" lang=\"ca\">Gris<\/span> <span class=\"multilang\" lang=\"es\">Gris<\/span> <span class=\"multilang\" lang=\"fr\">Gris<\/span> <span class=\"multilang\" lang=\"de\">Grau<\/span> <span class=\"multilang\" lang=\"en\">Grey<\/span>","value":"#95a5a6"},{"name":"<span class=\"multilang\" lang=\"ca\">Gris fosc<\/span> <span class=\"multilang\" lang=\"es\">Gris oscuro<\/span> <span class=\"multilang\" lang=\"fr\">Gris fonc\u00e9<\/span> <span class=\"multilang\" lang=\"de\">Dunkelgrau<\/span> <span class=\"multilang\" lang=\"en\">Dark grey<\/span>","value":"#7e8c8d"},{"name":"<span class=\"multilang\" lang=\"ca\">Blau mar\u00ed<\/span> <span class=\"multilang\" lang=\"es\">Azul marino<\/span> <span class=\"multilang\" lang=\"fr\">Bleu marine<\/span> <span class=\"multilang\" lang=\"de\">Marineblau<\/span> <span class=\"multilang\" lang=\"en\">Navy blue<\/span>","value":"#34495e"},{"name":"<span class=\"multilang\" lang=\"ca\">Negre<\/span><span class=\"multilang\" lang=\"es\">Negro<\/span><span class=\"multilang\" lang=\"fr\">N\u00e8gre<\/span><span class=\"multilang\" lang=\"de\">Schwarz<\/span><span class=\"multilang\" lang=\"en\">Black<\/span>","value":"#000000"},{"name":"<span class=\"multilang\" lang=\"ca\">Blanc<\/span> <span class=\"multilang\" lang=\"es\">Blanco<\/span> <span class=\"multilang\" lang=\"fr\">Blanc<\/span> <span class=\"multilang\" lang=\"de\">Wei\u00df<\/span> <span class=\"multilang\" lang=\"en\">White<\/span>","value":"#FFFFFF"}]';
        set_config('textcolors', $textColors, 'tiny_fontcolor');
        mtrace('Text colors for tiny_fontcolor configured', "\n");

        cache_helper::purge_all(true);
        mtrace('Purged all caches', "\n");

        return true;

    }

}
