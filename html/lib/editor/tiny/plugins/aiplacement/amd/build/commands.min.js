define("tiny_aiplacement/commands",["exports","editor_tiny/utils","core/str","./common","./generateimage","./generatetext","./options"],(function(_exports,_utils,_str,_common,_generateimage,_generatetext,_options){function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}
/**
   * Commands helper for the Moodle tiny_aiplacement plugin.
   *
   * @module      tiny_aiplacement/commands
   * @copyright   2024 Matt Porritt <matt.porritt@moodle.com>
   * @license     http://www.gnu.org/copyleft/gpl.html GNU GPL v3 or later
   */Object.defineProperty(_exports,"__esModule",{value:!0}),_exports.getSetup=void 0,_generateimage=_interopRequireDefault(_generateimage),_generatetext=_interopRequireDefault(_generatetext);_exports.getSetup=async()=>{const[contextMenuIconText,generateImageIconText,generateTextIconText,contextMenuIconImage,generateImageIconImage,generateTextIconImage]=await Promise.all([(0,_str.get_string)("generatecontent",_common.placement),(0,_str.get_string)("generateimage",_common.placement),(0,_str.get_string)("generatetext",_common.placement),(0,_utils.getButtonImage)(_common.contextMenuIcon,_common.component),(0,_utils.getButtonImage)(_common.generateImageIcon,_common.component),(0,_utils.getButtonImage)(_common.generateTextIcon,_common.component)]);return editor=>{if(!(0,_options.isTextAllowed)(editor)&&!(0,_options.isImageAllowed)(editor))return;editor.ui.registry.addIcon(_common.contextMenuIcon,contextMenuIconImage.html),editor.ui.registry.addIcon(_common.generateImageIcon,generateImageIconImage.html),editor.ui.registry.addIcon(_common.generateTextIcon,generateTextIconImage.html);const{menuItems:menuItems,singleButton:singleButton,singleButtonTitle:singleButtonTitle,generator:generator}=(editor=>{const menuItems=[];if((0,_options.isTextAllowed)(editor)){const textGenerator=new _generatetext.default(editor);if(editor.ui.registry.addMenuItem(_common.generateTextName,{icon:_common.generateTextIcon,text:generateTextIconText,onAction:()=>{textGenerator.displayContentModal(editor)}}),menuItems.push(_common.generateTextName),!(0,_options.isImageAllowed)(editor))return{menuItems:menuItems,singleButton:_common.generateTextIcon,singleButtonTitle:generateTextIconText,generator:textGenerator}}if((0,_options.isImageAllowed)(editor)){const imageGenerator=new _generateimage.default(editor);if(editor.ui.registry.addMenuItem(_common.generateImageName,{icon:_common.generateImageIcon,text:generateImageIconText,onAction:()=>{imageGenerator.displayContentModal(editor)}}),menuItems.push(_common.generateImageName),!(0,_options.isTextAllowed)(editor))return{menuItems:menuItems,singleButton:_common.generateImageIcon,singleButtonTitle:generateImageIconText,generator:imageGenerator}}return{menuItems:menuItems,singleButton:null,singleButtonTitle:null,generator:null}})(editor);(0,_utils.addDynamicToolbarMenu)(editor,menuItems,_common.contextMenuName,_common.contextMenuIcon,contextMenuIconText,singleButton,singleButtonTitle,(()=>{generator.displayContentModal(editor)}))}}}));

//# sourceMappingURL=commands.min.js.map