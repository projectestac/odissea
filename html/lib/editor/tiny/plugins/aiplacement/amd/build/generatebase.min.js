define("tiny_aiplacement/generatebase",["exports","tiny_aiplacement/loading","core/str","tiny_aiplacement/options","core_ai/policy","core_ai/policymodal","core/custom_interaction_events","./options"],(function(_exports,_loading,_str,_options,_policy,_policymodal,_custom_interaction_events,_options2){function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}Object.defineProperty(_exports,"__esModule",{value:!0}),_exports.default=void 0,_policy=_interopRequireDefault(_policy),_policymodal=_interopRequireDefault(_policymodal),_custom_interaction_events=_interopRequireDefault(_custom_interaction_events);return _exports.default=class{constructor(editor){var obj,key,value;value=void 0,(key="modalObject")in(obj=this)?Object.defineProperty(obj,key,{value:value,enumerable:!0,configurable:!0,writable:!0}):obj[key]=value,this.editor=editor,this.userid=(0,_options.getUserId)(editor),this.contextid=(0,_options.getContextId)(editor),this.responseObj=null}async displayContentModal(){if(_policy.default.preconfigurePolicyState(this.userid,(0,_options2.isPolicyAgreed)(this.editor)),await _policy.default.getPolicyStatus(this.userid))this.modalObject=await this.setupModal();else{const policyModal=await _policymodal.default.create();policyModal.getModal().on(_custom_interaction_events.default.events.activate,policyModal.getActionSelector("save"),(()=>{this.displayContentModal()}))}}getModalClass(){throw new Error("Method 'getModalClass' must be implemented.")}async setupModal(){const modal=this.getModalClass().create({templateContext:{elementid:this.editor.id}});return this.addContentEventListeners(modal),modal}async addContentEventListeners(modal){const root=(await modal).getRoot()[0];root.addEventListener("click",(e=>{this.handleContentModalClick(e,root)})),this.setupPromptArea(root),this.hideLoadingSpinner(root)}handleContentModalClick(){throw new Error("Method handleContentModalClick must be implemented.")}hideLoadingSpinner(root){const loadingSpinnerDiv=root.querySelector('[id="'.concat(this.editor.id,'_tiny_aiplacement_spinner"]'));loadingSpinnerDiv.classList.add("hidden"),loadingSpinnerDiv.classList.remove("tiny-aiplacement-loading-spinner-container")}async displayLoading(root,submitBtn){let removeClass=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;const loadingSpinnerDiv=root.querySelector('[id="'.concat(this.editor.id,'_tiny_aiplacement_spinner"]')),overlayDiv=root.querySelector('[id="'.concat(this.editor.id,'_tiny_aiplacement_overlay"]')),blurDiv=root.querySelector('[id="'.concat(this.editor.id,'_tiny_aiplacement_blur"]')),loadingTextDiv=root.querySelector('[id="'.concat(this.editor.id,'_tiny_aiplacement_loading_text"]')),actionButtons=root.querySelectorAll(".tiny-aiplacement-generate-footer button");(0,_loading.loadingMessages)(loadingTextDiv),removeClass&&loadingSpinnerDiv.classList.remove(removeClass),loadingSpinnerDiv.classList.remove("hidden"),overlayDiv.classList.remove("hidden"),blurDiv.classList.add("tiny-aiplacement-blur"),submitBtn.innerHTML=await(0,_str.getString)("generating","tiny_aiplacement"),actionButtons&&actionButtons.forEach((button=>{button.disabled=!0}))}async hideLoading(root,submitBtn){const loadingSpinnerDiv=root.querySelector('[id="'.concat(this.editor.id,'_tiny_aiplacement_spinner"]')),overlayDiv=root.querySelector('[id="'.concat(this.editor.id,'_tiny_aiplacement_overlay"]')),blurDiv=root.querySelector('[id="'.concat(this.editor.id,'_tiny_aiplacement_blur"]')),actionButtons=root.querySelectorAll(".tiny-aiplacement-generate-footer button");loadingSpinnerDiv&&loadingSpinnerDiv.classList.add("hidden"),overlayDiv&&overlayDiv.classList.add("hidden"),blurDiv&&blurDiv.classList.remove("tiny-aiplacement-blur"),submitBtn.innerHTML=await(0,_str.getString)("regenerate","tiny_aiplacement"),actionButtons&&actionButtons.forEach((button=>{button.disabled=!1}))}},_exports.default}));

//# sourceMappingURL=generatebase.min.js.map