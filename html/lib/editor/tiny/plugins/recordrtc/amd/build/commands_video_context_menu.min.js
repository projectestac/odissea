define("tiny_recordrtc/commands_video_context_menu",["exports","core/str","editor_tiny/utils","./common","./options","./video_recorder","./screen_recorder"],(function(_exports,_str,_utils,_common,_options,_video_recorder,_screen_recorder){function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}
/**
   * Tiny Record RTC - Video context menu command.
   *
   * @module      tiny_recordrtc/commands_video_context_menu
   * @copyright   2024 The Open University
   * @license     http://www.gnu.org/copyleft/gpl.html GNU GPL v3 or later
   */Object.defineProperty(_exports,"__esModule",{value:!0}),_exports.default=void 0,_video_recorder=_interopRequireDefault(_video_recorder),_screen_recorder=_interopRequireDefault(_screen_recorder);return _exports.default=async()=>{const[videoContextMenuTitle,videoButtonTitle,screenButtonTitle,buttonImageVideo,buttonImageScreen]=await Promise.all([(0,_str.getString)("videorecordmenutitle",_common.component),(0,_str.getString)("videobuttontitle",_common.component),(0,_str.getString)("screenbuttontitle",_common.component),(0,_utils.getButtonImage)("video",_common.component),(0,_utils.getButtonImage)("screen",_common.component)]);return editor=>{let recorder,useContextMenu=!0,singleButton="video",singleButtonTitle=videoButtonTitle,imageHtml=buttonImageVideo.html;((0,_options.isVideoAllowed)(editor)||(0,_options.isScreenAllowed)(editor))&&((0,_options.isVideoAllowed)(editor)&&!(0,_options.isScreenAllowed)(editor)?(useContextMenu=!1,recorder=_video_recorder.default):(0,_options.isScreenAllowed)(editor)&&!(0,_options.isVideoAllowed)(editor)&&(useContextMenu=!1,singleButton="screen",singleButtonTitle=screenButtonTitle,imageHtml=buttonImageScreen.html,recorder=_screen_recorder.default),editor.ui.registry.addIcon(singleButton,imageHtml),useContextMenu?editor.ui.registry.addMenuButton(_common.videoContextMenuName,{icon:singleButton,tooltip:videoContextMenuTitle,fetch:callback=>callback("".concat(_common.videoButtonName," ").concat(_common.screenButtonName))}):editor.ui.registry.addButton(_common.videoContextMenuName,{icon:singleButton,tooltip:singleButtonTitle,onAction:()=>recorder.display(editor)}))}},_exports.default}));

//# sourceMappingURL=commands_video_context_menu.min.js.map