function _typeof(obj){return _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(obj){return typeof obj}:function(obj){return obj&&"function"==typeof Symbol&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj},_typeof(obj)
/**
 * videojs-flash
 * @version 2.2.1
 * @copyright 2020 Brightcove, Inc.
 * @license Apache-2.0
 */}!function(global,factory){"object"===("undefined"==typeof exports?"undefined":_typeof(exports))&&"undefined"!=typeof module?module.exports=factory(require("video.js")):"function"==typeof define&&define.amd?define("media_videojs/videojs-flash-lazy",["media_videojs/video-lazy"],factory):global.videojsFlash=factory(global.videojs)}(window,(function(videojs){videojs=videojs&&videojs.hasOwnProperty("default")?videojs.default:videojs;var commonjsGlobal="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},window_1="undefined"!=typeof window?window:void 0!==commonjsGlobal?commonjsGlobal:"undefined"!=typeof self?self:{},Tech=videojs.getComponent("Tech"),Dom=videojs.dom,Url=videojs.url,createTimeRange=videojs.createTimeRange,mergeOptions=videojs.mergeOptions,navigator=window_1&&window_1.navigator||{},Flash=function(_Tech){function Flash(options,ready){!function(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}(this,Flash);var _this=function(self,call){if(!self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!call||"object"!==_typeof(call)&&"function"!=typeof call?self:call}(this,_Tech.call(this,options,ready));return options.source&&_this.ready((function(){this.setSource(options.source)}),!0),options.startTime&&_this.ready((function(){this.load(),this.play(),this.currentTime(options.startTime)}),!0),window_1.videojs=window_1.videojs||{},window_1.videojs.Flash=window_1.videojs.Flash||{},window_1.videojs.Flash.onReady=Flash.onReady,window_1.videojs.Flash.onEvent=Flash.onEvent,window_1.videojs.Flash.onError=Flash.onError,_this.on("seeked",(function(){this.lastSeekTarget_=void 0})),_this}return function(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function, not "+_typeof(superClass));subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:!1,writable:!0,configurable:!0}}),superClass&&(Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass)}(Flash,_Tech),Flash.prototype.createEl=function(){var options=this.options_;options.swf||(options.swf="https://vjs.zencdn.net/swf/5.4.2/video-js.swf");var objId=options.techId,flashVars=mergeOptions({readyFunction:"videojs.Flash.onReady",eventProxyFunction:"videojs.Flash.onEvent",errorEventProxyFunction:"videojs.Flash.onError",autoplay:options.autoplay,preload:options.preload,loop:options.loop,muted:options.muted},options.flashVars),params=mergeOptions({wmode:"opaque",bgcolor:"#000000"},options.params),attributes=mergeOptions({id:objId,name:objId,class:"vjs-tech"},options.attributes);return this.el_=Flash.embed(options.swf,flashVars,params,attributes),this.el_.tech=this,this.el_},Flash.prototype.play=function(){this.ended()&&this.setCurrentTime(0),this.el_.vjs_play()},Flash.prototype.pause=function(){this.el_.vjs_pause()},Flash.prototype.src=function(_src){return void 0===_src?this.currentSrc():this.setSrc(_src)},Flash.prototype.setSrc=function(src){var _this2=this;src=Url.getAbsoluteURL(src),this.el_.vjs_src(src),this.autoplay()&&this.setTimeout((function(){return _this2.play()}),0)},Flash.prototype.seeking=function(){return void 0!==this.lastSeekTarget_},Flash.prototype.setCurrentTime=function(time){var seekable=this.seekable();seekable.length&&(time=(time=time>seekable.start(0)?time:seekable.start(0))<seekable.end(seekable.length-1)?time:seekable.end(seekable.length-1),this.lastSeekTarget_=time,this.trigger("seeking"),this.el_.vjs_setProperty("currentTime",time),_Tech.prototype.setCurrentTime.call(this))},Flash.prototype.currentTime=function(){return this.seeking()?this.lastSeekTarget_||0:this.el_.vjs_getProperty("currentTime")},Flash.prototype.currentSrc=function(){return this.currentSource_?this.currentSource_.src:this.el_.vjs_getProperty("currentSrc")},Flash.prototype.duration=function(){if(0===this.readyState())return NaN;var duration=this.el_.vjs_getProperty("duration");return duration>=0?duration:1/0},Flash.prototype.load=function(){this.el_.vjs_load()},Flash.prototype.poster=function(){this.el_.vjs_getProperty("poster")},Flash.prototype.setPoster=function(){},Flash.prototype.seekable=function(){var duration=this.duration();return 0===duration?createTimeRange():createTimeRange(0,duration)},Flash.prototype.buffered=function(){var ranges=this.el_.vjs_getProperty("buffered");return 0===ranges.length?createTimeRange():createTimeRange(ranges[0][0],ranges[0][1])},Flash.prototype.supportsFullScreen=function(){return!1},Flash.prototype.enterFullScreen=function(){return!1},Flash.prototype.getVideoPlaybackQuality=function(){var videoPlaybackQuality=this.el_.vjs_getProperty("getVideoPlaybackQuality");return window_1.performance&&"function"==typeof window_1.performance.now?videoPlaybackQuality.creationTime=window_1.performance.now():window_1.performance&&window_1.performance.timing&&"number"==typeof window_1.performance.timing.navigationStart&&(videoPlaybackQuality.creationTime=window_1.Date.now()-window_1.performance.timing.navigationStart),videoPlaybackQuality},Flash}(Tech),_readWrite=["rtmpConnection","rtmpStream","preload","defaultPlaybackRate","playbackRate","autoplay","loop","controls","volume","muted","defaultMuted"],_readOnly=["networkState","readyState","initialTime","startOffsetTime","paused","ended","videoWidth","videoHeight"],_api=Flash.prototype;function _createSetter(attr){var attrUpper=attr.charAt(0).toUpperCase()+attr.slice(1);_api["set"+attrUpper]=function(val){return this.el_.vjs_setProperty(attr,val)}}function _createGetter(attr){_api[attr]=function(){return this.el_.vjs_getProperty(attr)}}for(var i=0;i<_readWrite.length;i++)_createGetter(_readWrite[i]),_createSetter(_readWrite[i]);for(var _i=0;_i<_readOnly.length;_i++)_createGetter(_readOnly[_i]);return Flash.isSupported=function(){return!((!videojs.browser.IS_CHROME||videojs.browser.IS_ANDROID&&videojs.browser.IS_IOS)&&(!videojs.browser.IS_SAFARI||videojs.browser.IS_IOS)&&!videojs.browser.IS_EDGE)||Flash.version()[0]>=10},Tech.withSourceHandlers(Flash),Flash.nativeSourceHandler={},Flash.nativeSourceHandler.canPlayType=function(type){return type in Flash.formats?"maybe":""},Flash.nativeSourceHandler.canHandleSource=function(source,options){var src,ext,type=void 0;return source.type?type=source.type.replace(/;.*/,"").toLowerCase():(src=source.src,type=(ext=Url.getFileExtension(src))?"video/"+ext:""),Flash.nativeSourceHandler.canPlayType(type)},Flash.nativeSourceHandler.handleSource=function(source,tech,options){tech.setSrc(source.src)},Flash.nativeSourceHandler.dispose=function(){},Flash.registerSourceHandler(Flash.nativeSourceHandler),Flash.formats={"video/flv":"FLV","video/x-flv":"FLV","video/mp4":"MP4","video/m4v":"MP4"},Flash.onReady=function(currSwf){var el=Dom.$("#"+currSwf),tech=el&&el.tech;tech&&tech.el()&&Flash.checkReady(tech)},Flash.checkReady=function(tech){tech.el()&&(tech.el().vjs_getProperty?tech.triggerReady():this.setTimeout((function(){Flash.checkReady(tech)}),50))},Flash.onEvent=function(swfID,eventName){var tech=Dom.$("#"+swfID).tech,args=Array.prototype.slice.call(arguments,2);tech.setTimeout((function(){tech.trigger(eventName,args)}),1)},Flash.onError=function(swfID,err){var tech=Dom.$("#"+swfID).tech;if("srcnotfound"===err)return tech.error(4);"string"==typeof err?tech.error("FLASH: "+err):(err.origin="flash",tech.error(err))},Flash.version=function(){var version$$1="0,0,0";try{version$$1=new window_1.ActiveXObject("ShockwaveFlash.ShockwaveFlash").GetVariable("$version").replace(/\D+/g,",").match(/^,?(.+),?$/)[1]}catch(e){try{navigator.mimeTypes["application/x-shockwave-flash"].enabledPlugin&&(version$$1=(navigator.plugins["Shockwave Flash 2.0"]||navigator.plugins["Shockwave Flash"]).description.replace(/\D+/g,",").match(/^,?(.+),?$/)[1])}catch(err){}}return version$$1.split(",")},Flash.embed=function(swf,flashVars,params,attributes){var code=Flash.getEmbedCode(swf,flashVars,params,attributes);return Dom.createEl("div",{innerHTML:code}).childNodes[0]},Flash.getEmbedCode=function(swf,flashVars,params,attributes){var flashVarsString="",paramsString="",attrsString="";return flashVars&&Object.getOwnPropertyNames(flashVars).forEach((function(key){flashVarsString+=key+"="+flashVars[key]+"&amp;"})),params=mergeOptions({movie:swf,flashvars:flashVarsString,allowScriptAccess:"always",allowNetworking:"all"},params),Object.getOwnPropertyNames(params).forEach((function(key){paramsString+='<param name="'+key+'" value="'+params[key]+'" />'})),attributes=mergeOptions({data:swf,width:"100%",height:"100%"},attributes),Object.getOwnPropertyNames(attributes).forEach((function(key){attrsString+=key+'="'+attributes[key]+'" '})),'<object type="application/x-shockwave-flash" '+attrsString+">"+paramsString+"</object>"},function(Flash){Flash.streamingFormats={"rtmp/mp4":"MP4","rtmp/flv":"FLV"},Flash.streamFromParts=function(connection,stream){return connection+"&"+stream},Flash.streamToParts=function(src){var parts={connection:"",stream:""};if(!src)return parts;var connEnd=src.search(/&(?![\w-]+=)/),streamBegin=void 0;return-1!==connEnd?streamBegin=connEnd+1:0===(connEnd=streamBegin=src.lastIndexOf("/")+1)&&(connEnd=streamBegin=src.length),parts.connection=src.substring(0,connEnd),parts.stream=src.substring(streamBegin,src.length),parts},Flash.isStreamingType=function(srcType){return srcType in Flash.streamingFormats},Flash.RTMP_RE=/^rtmp[set]?:\/\//i,Flash.isStreamingSrc=function(src){return Flash.RTMP_RE.test(src)},Flash.rtmpSourceHandler={},Flash.rtmpSourceHandler.canPlayType=function(type){return Flash.isStreamingType(type)?"maybe":""},Flash.rtmpSourceHandler.canHandleSource=function(source,options){var can=Flash.rtmpSourceHandler.canPlayType(source.type);return can||(Flash.isStreamingSrc(source.src)?"maybe":"")},Flash.rtmpSourceHandler.handleSource=function(source,tech,options){var srcParts=Flash.streamToParts(source.src);tech.setRtmpConnection(srcParts.connection),tech.setRtmpStream(srcParts.stream)},Flash.registerSourceHandler(Flash.rtmpSourceHandler)}(Flash),Tech.getTech("Flash")?(videojs.log.warn("Not using videojs-flash as it appears to already be registered"),videojs.log.warn("videojs-flash should only be used with video.js@6 and above")):videojs.registerTech("Flash",Flash),Flash.VERSION="2.2.1",Flash}));

//# sourceMappingURL=videojs-flash-lazy.min.js.map