define("format_multitopic/courseformat/contenttabs/tab",["exports","format_multitopic/courseformat/contenttabs/tabtitle","core_courseformat/local/courseeditor/dndsection"],(function(_exports,_tabtitle,_dndsection){function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}
/**
   * Tab format component.
   *
   * @module     format_multitopic/courseformat/contenttabs/tab
   * @class      format_multitopic/courseformat/contenttabs/tab
   * @copyright  2023 James Calder and Otago Polytechnic
   * @copyright  based on work by 2021 Ferran Recio <ferran@moodle.com>
   * @license    http://www.gnu.org/copyleft/gpl.html GNU GPL v3 or later
   */Object.defineProperty(_exports,"__esModule",{value:!0}),_exports.default=void 0,_tabtitle=_interopRequireDefault(_tabtitle),_dndsection=_interopRequireDefault(_dndsection);class _default extends _dndsection.default{create(){this.name="contenttabs_tab",this.selectors={SECTION_ITEM:"a.nav-link"},this.classes={LOCKED:"editinprogress",DROPBEFORE:"drop-before",DROPAFTER:"drop-after"},this.id=this.element.dataset.id}stateReady(state){if(this.configState(state),this.reactive.isEditing&&this.reactive.supportComponents){const sectionItem=this.getElement(this.selectors.SECTION_ITEM),headerComponent=new _tabtitle.default({...this,element:sectionItem,fullregion:this.element});this.configDragDrop(headerComponent)}}getWatchers(){return[{watch:"section[".concat(this.id,"]:updated"),handler:this._refreshSection}]}validateDropData(dropdata){if("section"===(null==dropdata?void 0:dropdata.type)){const sectionzeroid=this.course.sectionlist[0],origin=this.reactive.get("section",dropdata.id),target=this.section,targettablevel=this.element.className.match(/\btab_level_(\d+)\b/)[1];return(null==dropdata?void 0:dropdata.id)!=this.id&&targettablevel==origin.levelsan&&(target.levelsan==targettablevel||target.number>origin.number||this.course.draganddropsectionmoveafter)&&origin.id!=sectionzeroid}return!1}showDropZone(dropdata){if("section"==dropdata.type){const origin=this.reactive.get("section",dropdata.id);this.element.className.match(/\btab_level_(\d+)\b/)[1]==origin.levelsan&&(this.section.number>dropdata.number||this.course.draganddropsectionmoveafter?(this.element.classList.remove(this.classes.DROPBEFORE),this.element.classList.add(this.classes.DROPAFTER)):(this.element.classList.add(this.classes.DROPBEFORE),this.element.classList.remove(this.classes.DROPAFTER)))}}hideDropZone(){this.element.classList.remove(this.classes.DROPBEFORE),this.element.classList.remove(this.classes.DROPAFTER)}drop(dropdata){if("section"==dropdata.type){const origin=this.reactive.get("section",dropdata.id),target=this.section;this.element.className.match(/\btab_level_(\d+)\b/)[1]==origin.levelsan&&this.reactive.dispatch(this.course.draganddropsectionmoveafter?"sectionMoveAfter":"sectionMove",[origin.id],target.id)}}_refreshSection(_ref){var _element$dragging,_element$locked;let{element:element}=_ref;this.element.classList.toggle(this.classes.DRAGGING,null!==(_element$dragging=element.dragging)&&void 0!==_element$dragging&&_element$dragging),this.element.classList.toggle(this.classes.LOCKED,null!==(_element$locked=element.locked)&&void 0!==_element$locked&&_element$locked),this.locked=element.locked,this.getElement("div.tab_content").innerHTML=element.title}}return _exports.default=_default,_exports.default}));

//# sourceMappingURL=tab.min.js.map