define("assignsubmission_snap/init",["exports","jquery"],(function(_exports,_jquery){var obj;
/**
   * This module handles the display and events of the Snap! editor.
   *
   * @module     assignsubmission_snap/snap
   * @copyright 2020 Sara Arjona <sara@moodle.com> and Joan Guill√©n <jguille2@xtec.cat>
   * @license    http://www.gnu.org/copyleft/gpl.html GNU GPL v3 or later
   */Object.defineProperty(_exports,"__esModule",{value:!0}),_exports.init=void 0,_jquery=(obj=_jquery)&&obj.__esModule?obj:{default:obj};_exports.init=(xmlProject,userid,attemptNumber,editable)=>{const snapFrame=getSnapFrame(userid,attemptNumber);if(snapFrame&&editable){const form=getXMLInput().closest("form");registerListenerEvents(form,snapFrame)}};const getSnapFrame=(userid,attemptNumber)=>document.getElementById("snap_snap-"+userid+"-"+attemptNumber).contentWindow,getXMLInput=()=>(0,_jquery.default)('input[name="snap_xmlproject"]')[0],registerListenerEvents=(form,snapFrame)=>{document.getElementById("id_submitbutton").addEventListener("click",(function(event){event.preventDefault(),window.addEventListener("message",(function(e){"getProjectXML"==e.data.selector&&updateProject(form,e.data.response)}),!1),snapFrame.postMessage({selector:"getProjectXML"},"*")}))},updateProject=(form,newContent)=>{getXMLInput().value=newContent,form.submit()}}));

//# sourceMappingURL=init.min.js.map